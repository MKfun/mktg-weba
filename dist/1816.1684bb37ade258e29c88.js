"use strict";(self.webpackChunktelegram_t=self.webpackChunktelegram_t||[]).push([[1816],{81949:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(84051),r=n(87357);const i=({children:e,className:t,onClick:n})=>a.Ay.createElement("div",{className:(0,r.A)("hJUqHi4B",n&&"hjDEmFaT",t),onClick:n},e)},87049:(e,t,n)=>{n.d(t,{A:()=>m});var a=n(84051),r=n(13439),i=n(29807),o=n(87357),s=n(14745);const c={root:"AmQSvxpZ",text:"pQW7dcwr"},l={red:[["#FF5B54","#ED1C26"],["#653633","#532224"]],blue:[["#6ED2FF","#34A4FC"],["#344F5A","#152E42"]]},d=new Set(Object.keys(l)),m=(0,a.ph)((0,r.EK)((e=>({theme:(0,i.SJA)(e)})))((({text:e,color:t,className:n,theme:r})=>{const i=`svg-${(0,s.A)()}`,m=d.has(t)?t:void 0,A=m?l[m]["dark"===r?1:0]:void 0,u=A?A[0]:t,h=A?A[1]:t;return a.Ay.createElement("div",{className:(0,o.A)(c.root,n)},a.Ay.createElement("svg",{className:c.ribbon,width:"56",height:"56",viewBox:"0 0 56 56",fill:"none"},a.Ay.createElement("path",{d:"M52.4851 26.4853L29.5145 3.51472C27.2641 1.26428 24.2119 0 21.0293 0H2.82824C1.04643 0 0.154103 2.15429 1.41403 3.41422L52.5856 54.5858C53.8455 55.8457 55.9998 54.9534 55.9998 53.1716V34.9706C55.9998 31.788 54.7355 28.7357 52.4851 26.4853Z",fill:`url(#${i})`}),a.Ay.createElement("defs",null,a.Ay.createElement("linearGradient",{id:i,x1:"27.9998",y1:"1",x2:"27.9998",y2:"55",gradientUnits:"userSpaceOnUse"},a.Ay.createElement("stop",{"stop-color":u}),a.Ay.createElement("stop",{offset:"1","stop-color":h})))),a.Ay.createElement("div",{className:c.text},e))})))},88668:(e,t,n)=>{n.d(t,{A:()=>Ne});var a=n(84051),r=n(13439),i=n(23174),o=n(89925),s=n(31481),c=n(90709),l=n(26129),d=n(29807),m=n(87357),A=n(60343),u=n(41512),h=n(82393),y=n(54464),p=n(43874),g=n(10722),f=n(49746),v=n(37661),E=n(5912),I=n(17712),C=n(14622),b=n(21511),N=n(48196),P=n(79519),k=n(96773),S=n(76023),x=n(21849),F=n(50805);const w=15*S.$,T=(0,a.ph)((({action:e,onClick:t,observeIntersection:n})=>a.Ay.createElement(x.A,{className:F.A.channelPhoto,photo:e.photo,loopIndefinitely:!0,withVideo:!0,observeIntersection:n,onClick:t,size:w})));var G=n(18501),B=n(39351),M=n(85118),U=n(82855);const V=(0,a.ph)((0,r.EK)(((e,{action:t})=>({sticker:"giftPremium"===t.type?(0,d.t0O)(e,t.months):(0,d.WLj)(e,t.stars),canPlayAnimatedEmojis:(0,d.BWX)(e)})))((({action:e,sticker:t,canPlayAnimatedEmojis:n,onClick:r,observeIntersectionForLoading:i,observeIntersectionForPlaying:o})=>{const s=(0,a.li)(null),c=(0,B.A)(),l="giftPremium"===e.type?e.message:void 0;return a.Ay.createElement("div",{className:F.A.contentBox,tabIndex:0,role:"button",onClick:r},a.Ay.createElement("div",{ref:s,className:F.A.stickerWrapper,style:"width: 150px; height: 150px"},t&&a.Ay.createElement(U.A,{containerRef:s,sticker:t,size:150,observeIntersectionForLoading:i,observeIntersectionForPlaying:o,noLoad:!n})),a.Ay.createElement("div",{className:F.A.info},a.Ay.createElement("h3",{className:F.A.title},"giftPremium"===e.type?c("ActionGiftPremiumTitle",{months:e.months},{pluralValue:e.months}):c("ActionGiftStarsTitle",{amount:e.stars},{pluralValue:e.stars})),a.Ay.createElement("div",null,l&&(0,G.f)(l),!l&&c("giftPremium"===e.type?"ActionGiftPremiumText":"ActionGiftStarsText"))),a.Ay.createElement("div",{className:F.A.actionButton},a.Ay.createElement(M.A,{preset:"button"}),c("ActionViewButton")))})));var R=n(4262);const L=(0,a.ph)((0,r.EK)(((e,{action:t})=>({sticker:"giftCode"===t.type?(0,d.t0O)(e,t.months):(0,d.WLj)(e,t.stars),canPlayAnimatedEmojis:(0,d.BWX)(e),channel:(0,d.hds)(e,t.boostPeerId)})))((({action:e,sticker:t,canPlayAnimatedEmojis:n,channel:r,onClick:i,observeIntersectionForLoading:o,observeIntersectionForPlaying:s})=>{const l=(0,a.li)(null),d=(0,B.A)(),m=(0,a.Kr)((()=>{const e=r&&(0,c.F9N)(d,r),t=d("ActionFallbackChannel");return(0,R.Nm)(r?.id,e||t)}),[r,d]);return a.Ay.createElement("div",{className:F.A.contentBox,tabIndex:0,role:"button",onClick:i},a.Ay.createElement("div",{ref:l,className:F.A.stickerWrapper,style:"width: 150px; height: 150px"},t&&a.Ay.createElement(U.A,{containerRef:l,sticker:t,size:150,observeIntersectionForLoading:o,observeIntersectionForPlaying:s,noLoad:!n})),a.Ay.createElement("div",null,a.Ay.createElement("h3",{className:F.A.title},d("ActionGiveawayResultTitle")),a.Ay.createElement("div",null,"giftCode"===e.type&&d(e.isViaGiveaway?"ActionGiveawayResultPremiumText":"ActionGiftCodePremiumText",{months:e.months,channel:m},{withNodes:!0,withMarkdown:!0,pluralValue:e.months,renderTextFilters:["br"]}),"prizeStars"===e.type&&d("ActionGiveawayResultStarsText",{amount:e.stars,channel:m},{withNodes:!0,withMarkdown:!0,pluralValue:e.stars,renderTextFilters:["br"]}))),a.Ay.createElement("div",{className:F.A.actionButton},a.Ay.createElement(M.A,{preset:"button"}),d("giftCode"===e.type?"ActionOpenGiftButton":"ActionViewButton")))})));var J=n(70636),j=n(48775),O=n(80140),K=n(14242),W=n(66833),q=n(87094),z=n(87049);const D=(0,a.ph)((0,r.EK)(((e,{message:t,action:n})=>{const a=(0,d.BWX)(e),r=(0,d.Y7C)(e,t),i=n.fromId?(0,d.PVB)(e,n.fromId):void 0,o=(0,d.PVB)(e,t.chatId);return{canPlayAnimatedEmojis:a,sender:i||r,recipient:(n.peerId?(0,d.PVB)(e,n.peerId):void 0)||o,starGiftMaxConvertPeriod:e.appConfig?.starGiftMaxConvertPeriod}}))((({action:e,message:t,canPlayAnimatedEmojis:n,sender:r,recipient:i,starGiftMaxConvertPeriod:o,onClick:s,observeIntersectionForLoading:l,observeIntersectionForPlaying:d})=>{const A=(0,a.li)(null),u=(0,a.li)(null),h=(0,B.A)(),{isOutgoing:y}=t,p=(0,W.yQ)(e.gift),g=y?i:r,f=g&&(0,J.vj)(g)&&(0,c.WXB)(g),v=(0,q.A)(A,"background-color",!e.gift.availabilityTotal),E=h("ActionFallbackSomeone"),I=g&&(0,c.F9N)(h,g),C=r?.id===i?.id,b=(0,a.Kr)((()=>{const n=(0,R.Nm)(g?.id,I||E),a=void 0!==e.starsToConvert?(0,j.K)(h,e.starsToConvert):void 0;return e.isUpgraded?h("ActionStarGiftUpgraded"):e.alreadyPaidUpgradeStars?(0,R.AD)(h,"ActionStarGiftUpgradeText",!y||C,{peer:n}):e.isConverted?(0,R.AD)(h,"ActionStarGiftConvertedText",!y||C,{peer:n,amount:a}):o&&(0,O.Fm)()<t.date+o?(0,R.AD)(h,"ActionStarGiftConvertText",!y||C,{peer:n,amount:a}):f?h("ActionStarGiftChannelText",{amount:a},{withNodes:!0}):(0,R.AD)(h,"ActionStarGiftNoConvertText",!y||C,{peer:n})}),[e,E,f,y,h,t.date,g?.id,I,o,C]);return a.Ay.createElement("div",{ref:A,className:(0,m.A)(F.A.contentBox,F.A.starGift),tabIndex:0,role:"button",onClick:s},a.Ay.createElement("div",{ref:u,className:F.A.stickerWrapper,style:"width: 120px; height: 120px"},p&&a.Ay.createElement(U.A,{containerRef:u,sticker:p,size:120,observeIntersectionForLoading:l,observeIntersectionForPlaying:d,noLoad:!n})),e.gift.availabilityTotal&&a.Ay.createElement(z.A,{color:v||"blue",text:h("ActionStarGiftLimitedRibbon",{total:(0,K.Vw)(e.gift.availabilityTotal)})}),a.Ay.createElement("div",{className:F.A.info},a.Ay.createElement("h3",{className:F.A.title},C?h("ActionStarGiftSelf"):h(y?"ActionStarGiftTo":"ActionStarGiftFrom",{peer:(0,R.Nm)(g?.id,I||E)},{withNodes:!0})),a.Ay.createElement("div",{className:F.A.subtitle},e.message&&(0,G.f)(e.message),!e.message&&b)),a.Ay.createElement("div",{className:F.A.actionButton},a.Ay.createElement(M.A,{preset:"button"}),!e.alreadyPaidUpgradeStars||e.isUpgraded||y?h("ActionViewButton"):h("ActionStarGiftUnpack")))})));var H=n(95807);const Q=(0,a.ph)((({data:e,style:t,className:n,valueClassName:r,keyClassName:i})=>a.Ay.createElement("div",{className:(0,m.A)("cKr8J5k_",n),style:t},e.map((([e,t])=>a.Ay.createElement(a.Ay.Fragment,null,a.Ay.createElement("div",{className:(0,m.A)("c9RLLvfs",i)},e),a.Ay.createElement("div",{className:(0,m.A)("QEuGpzIc",r)},t)))))));var $=n(40558);const X=(0,a.ph)((0,r.EK)(((e,{message:t,action:n})=>{const a=(0,d.BWX)(e),r=(0,d.Y7C)(e,t),i=n.fromId?(0,d.PVB)(e,n.fromId):void 0,o=(0,d.PVB)(e,t.chatId);return{canPlayAnimatedEmojis:a,sender:i||r,recipient:(n.peerId?(0,d.PVB)(e,n.peerId):void 0)||o}}))((({action:e,message:t,canPlayAnimatedEmojis:n,sender:r,recipient:i,onClick:o,observeIntersectionForLoading:s,observeIntersectionForPlaying:l})=>{const d=(0,a.li)(null),A=(0,B.A)(),{isOutgoing:u}=t,h=(0,W.yQ)(e.gift),y=(0,W.uc)(e.gift),p=y.model,g=y.pattern,f=y.backdrop,v=[f.centerColor,f.edgeColor],E=`${f.patternColor.slice(0,7)}55`,I=(0,a.Kr)((()=>[[A("ActionStarGiftUniqueModel"),p.name],[A("ActionStarGiftUniqueBackdrop"),f.name],[A("ActionStarGiftUniqueSymbol"),g.name]]),[A,p,g,f]),C=u?i:r,b=A("ActionFallbackSomeone"),N=C&&(0,c.F9N)(A,C),P=r?.id===i?.id;return a.Ay.createElement("div",{className:(0,m.A)(F.A.contentBox,F.A.starGift,F.A.uniqueGift),tabIndex:0,role:"button",onClick:o},a.Ay.createElement("div",{className:F.A.uniqueBackgroundWrapper},a.Ay.createElement($.A,{className:F.A.uniqueBackground,backgroundColors:v,patternColor:f.patternColor,patternIcon:g.sticker,clearBottomSector:!0})),a.Ay.createElement("div",{ref:d,className:F.A.stickerWrapper,style:"width: 120px; height: 120px"},h&&a.Ay.createElement(U.A,{containerRef:d,sticker:h,size:120,observeIntersectionForLoading:s,observeIntersectionForPlaying:l,noLoad:!n})),a.Ay.createElement(z.A,{color:E,text:A("ActionStarGiftUniqueRibbon")}),a.Ay.createElement("div",{className:F.A.info},a.Ay.createElement("h3",{className:F.A.title},P?A("ActionStarGiftSelf"):A(u?"ActionStarGiftTo":"ActionStarGiftFrom",{peer:(0,R.Nm)(C?.id,N||b)},{withNodes:!0})),a.Ay.createElement("div",{className:F.A.subtitle,style:`color: ${f.textColor}`},A("GiftUnique",{title:e.gift.title,number:e.gift.number})),a.Ay.createElement(Q,{data:I,style:`color: ${f.textColor}`,valueClassName:F.A.uniqueValue})),a.Ay.createElement("div",{className:F.A.actionButton,style:(0,H.A)(E&&`background-color: ${E}`)},a.Ay.createElement(M.A,{preset:"button"}),A("ActionViewButton")))})));var Z=n(87679),_=n(62587),Y=n(94189),ee=n(68584);const te=(0,a.ph)((0,r.EK)(((e,{message:t})=>({peer:(0,d.PVB)(e,t.chatId)})))((({message:e,action:t,peer:n,observeIntersection:s})=>{const{openMediaViewer:l,uploadProfilePhoto:d,showNotification:m}=(0,r.ko)(),{isOutgoing:A}=e,u=t.photo,h=(0,B.A)(),[y,p]=(0,a.J0)(),[g,f,E]=(0,v.A)(!1),C=(0,_.A)((0,c.rIo)(u,"full")),b=(0,_.A)((0,c.Pgy)(u)),N=u.isVideo,P=(0,a.Kr)((()=>{const e=n&&(0,c.F9N)(h,n)||h("ActionFallbackUser"),t=(0,R.Nm)(n?.id,e);return h(A?"ActionSuggestedPhotoYou":"ActionSuggestedPhoto",{user:t},{withNodes:!0})}),[h,A,n]),k=(0,I.A)((()=>{m({title:h("ActionSuggestedPhotoUpdatedTitle"),message:h("ActionSuggestedPhotoUpdatedDescription"),action:{action:"requestNextSettingsScreen",payload:{screen:o.VS.Main}},actionText:h("Open")})})),S=(0,I.A)((e=>{p(void 0),d({file:e}),k()})),w=(0,I.A)((()=>{p(void 0)})),T=(0,I.A)((async()=>{if(!b)return;E(),k();const e=await(0,Z.sZ)(b);d({file:new File([e],"avatar.mp4"),isVideo:!0,videoTs:u.videoSizes?.find((e=>void 0!==e.videoStartTs))?.videoStartTs})}));return a.Ay.createElement("div",{className:F.A.contentBox,tabIndex:0,role:"button",onClick:async()=>{!A&&C?N?f():p(await(0,Z.sZ)(C)):l({chatId:e.chatId,messageId:e.id,threadId:i.l3,origin:o.TQ.SuggestedAvatar})}},a.Ay.createElement(x.A,{className:F.A.suggestedAvatar,photo:t.photo,loopIndefinitely:!0,withVideo:!0,observeIntersection:s,size:"jumbo"}),a.Ay.createElement("div",{className:F.A.suggestedText},P),a.Ay.createElement("div",{className:F.A.actionButton},h("ActionSuggestedPhotoButton")),a.Ay.createElement(ee.A,{file:y,onClose:w,onChange:S}),a.Ay.createElement(Y.A,{isOpen:g,title:h("ActionSuggestedVideoTitle"),confirmHandler:T,onClose:E,text:h("ActionSuggestedVideoText")}))})));var ne=n(99515),ae=n(43581),re=n(14737),ie=n(48894);var oe=n(36838),se=n(59030),ce=n(18276),le=n(64493),de=n(55158);const me="d8axZxyN",Ae="glDpC2av",ue="gqCs9fSo",he="gnYhwnvf",ye="HWgwnKui",pe="BTNQ4KBH",ge="Xl9MVMTn",fe="Qizai7yv";function ve({channel:e}){const{openChat:t}=(0,r.ko)(),n=function(e,t="#00000000"){const[n,r]=(0,a.J0)(t),o=(0,_.A)((0,c.cP1)(e),!1,i.qZ.BlobUrl);return(0,a.vJ)((()=>{(async()=>{if(!o)return;const e=await(0,ie.rX)(o);r(`#${(0,ie.v2)(e)}`)})()}),[o]),n}(e,"#3C3C4399");return a.Ay.createElement("div",{className:Ae,onClick:()=>t({id:e.id})},a.Ay.createElement(x.A,{className:ue,key:e.id,size:"large",peer:e}),a.Ay.createElement("div",{style:`background: ${n}`,className:he},a.Ay.createElement(ce.A,{name:"user-filled",className:me}),a.Ay.createElement("span",{className:ye},(0,K.Vw)(e?.membersCount||0))),a.Ay.createElement("span",{className:pe},e.title))}function Ee({channel:e,chatId:t,channelsCount:n,isCurrentUserPremium:i}){const{openPremiumModal:o,openChatWithInfo:s}=(0,r.ko)(),c=(0,se.A)();return a.Ay.createElement("div",{className:(0,m.A)(Ae,"MBChXyXk"),onClick:()=>{i?s({id:t,shouldReplaceHistory:!0,profileTab:"similarChannels",forceScrollProfileTab:!0}):o()}},a.Ay.createElement(x.A,{className:ue,key:e.id,size:"large",peer:e}),a.Ay.createElement("div",{className:ge},a.Ay.createElement("div",{className:fe})),a.Ay.createElement("div",{className:(0,m.A)(ge,"JxSmtOFi")},a.Ay.createElement("div",{className:fe})),a.Ay.createElement("div",{className:he},a.Ay.createElement("span",{className:ye},`+${n}`),!i&&a.Ay.createElement(ce.A,{name:"lock-badge",className:me})),a.Ay.createElement("span",{className:pe},c("MoreSimilar")))}const Ie=(0,a.ph)((0,r.EK)(((e,{chatId:t})=>{const{similarChannelIds:n,isExpanded:a,count:r}=(0,d.dg4)(e,t)||{},i=(0,d.g29)(e),o=(0,d.AWZ)(e,t);return{similarChannelIds:n,isExpanded:a,count:r,isCurrentUserPremium:i,channelJoinInfo:o?.joinInfo}}))((({chatId:e,similarChannelIds:t,isExpanded:n,count:i,isCurrentUserPremium:o,channelJoinInfo:s})=>{const{toggleChannelRecommendations:c,loadChannelRecommendations:l}=(0,r.ko)(),A=(0,se.A)(),[u,h,y]=(0,v.A)(!1),[p,g,f]=(0,v.A)(!1),E=(0,a.li)(null),C=(0,a.li)(!1),b=(0,a.Kr)((()=>{if(!t)return;const e=(0,r.mS)();return t.map((t=>(0,d.hds)(e,t))).filter(Boolean)}),[t]),[N,P]=(0,a.J0)(!1),k=(0,a.Kr)((()=>b?.slice(0,10)),[b]),S=Boolean(k?.length),x=Boolean(!N&&(n||p||u)&&S);(0,oe.A)(E,!x,!0),(0,a.vJ)((()=>{t||l({chatId:e})}),[e,t]),(0,re.A)((()=>P(!1)),2e3),(0,a.vJ)((()=>{if(N&&b&&n){const e=setTimeout((()=>{P(!1)}),300);return()=>clearTimeout(e)}}),[b,n,N]),(0,a.vJ)((()=>{n?(h(),f(),P(!t),C.current||setTimeout((()=>{E.current?.scrollIntoView({behavior:"smooth"})}),150)):(y(),g())}),[n,t]);const F=(0,I.A)((()=>{c({chatId:e})}));if((0,a.vJ)((()=>{s?.joinedDate&&!n&&(0,O.Fm)()-s.joinedDate<=10&&(F(),C.current=!0)}),[s,n]),x||N)return a.Ay.createElement("div",{className:(0,m.A)("V3RHiOJR")},N&&a.Ay.createElement(de.A,{className:"xKVZv7KE"}),x&&a.Ay.createElement("div",{className:(0,m.A)(u&&"eb8rX09E",p&&"XR6_qLCc")},a.Ay.createElement("div",{className:"tfG_BSDt"},a.Ay.createElement("svg",{width:"19",height:"7",viewBox:"0 0 19 7",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.Ay.createElement("path",{className:"HVbeGv4t","fill-rule":"evenodd","clip-rule":"evenodd",d:"M19 7C16.8992 7 13.59 3.88897 11.5003 1.67424C10.7648 0.894688 10.397 0.50491 10.0434 0.385149C9.70568 0.270811 9.4225 0.270474 9.08456 0.38401C8.73059 0.50293 8.36133 0.892443 7.62279 1.67147C5.52303 3.88637 2.18302 7 0 7L19 7Z",fill:"white"}))),a.Ay.createElement("div",{className:"njAC8dR9"},a.Ay.createElement("div",{className:"s7QOi22Q"},a.Ay.createElement("span",{className:"JstcOhAN"},A("SimilarChannels")),a.Ay.createElement(le.A,{className:"meewH7t_",color:"translucent",onClick:F},a.Ay.createElement(ce.A,{name:"close"}))),a.Ay.createElement("div",{ref:E,className:(0,m.A)("h4gWlNen","no-scrollbar")},k?.map(((t,n)=>9===n?a.Ay.createElement(Ee,{channel:t,chatId:e,channelsCount:i-10+1,isCurrentUserPremium:o}):a.Ay.createElement(ve,{channel:t})))))))}))),Ce=new Set(["pinMessage","chatEditPhoto","chatDeletePhoto","unsupported"]),be=new Set(["giftCode","prizeStars","suggestProfilePhoto"]),Ne=(0,a.ph)((0,r.EK)(((e,{message:t,threadId:n})=>{const{settings:{themes:a}}=e,r=(0,d.nTw)(e),o=(0,d.hds)(e,t.chatId),s=(0,d.Y7C)(e,t),c=o?.isForum&&n!==i.l3,{replyToMsgId:m,replyToPeerId:A}=(0,l.Q)(t)||{},u=m?(0,d.O5q)(e,A||t.chatId,m):void 0,h=!!n&&(0,d.nJv)(e,t,n),{direction:y,noHighlight:p}=h&&r.focusedMessage||{},g=(0,d.g29)(e),f=o?.unreadReactions?.includes(t.id);return{sender:s,currentUserId:e.currentUserId,isCurrentUserPremium:g,isFocused:h,focusDirection:y,noFocusHighlight:p,isInsideTopic:c,replyMessage:u,isInSelectMode:(0,d.rTV)(e),patternColor:a[(0,d.SJA)(e)]?.patternColor,hasUnreadReaction:f}}))((({message:e,threadId:t,sender:n,currentUserId:i,appearanceOrder:d,isJustAdded:S,isLastInList:x,memoFirstUnreadIdRef:w,getIsMessageListReady:G,isInsideTopic:B,isFocused:M,focusDirection:U,noFocusHighlight:R,replyMessage:J,patternColor:j,isCurrentUserPremium:O,isInSelectMode:K,hasUnreadReaction:W,onIntersectPinnedMessage:q,observeIntersectionForBottom:z,observeIntersectionForLoading:H,observeIntersectionForPlaying:Q})=>{const{requestConfetti:$,openMediaViewer:Z,getReceipt:_,checkGiftCode:Y,openPrizeStarsTransactionFromGiveaway:ee,openPremiumModal:re,openStarsTransactionFromGift:ie,openGiftInfoModalFromMessage:oe,toggleChannelRecommendations:se,animateUnreadReaction:ce,markMentionsRead:le}=(0,r.ko)(),de=(0,a.li)(null),{id:me,chatId:Ae}=e,ue=e.content.action,he=(0,A.iL)(me),ye=be.has(ue.type),pe=Ce.has(ue.type),ge=h.uH&&!pe,fe=(0,l.Q)(e),{replyToMsgId:ve,replyToPeerId:Ee}=fe||{},Ne=Boolean(e.areReactionsPossible&&e?.reactions?.results?.length),Pe=B&&"topicCreate"===ue.type,{isTouchScreen:ke}=(0,p.Ay)();(0,E.mv)(de,Pe?void 0:z),(0,C.A)(de,!Pe&&x&&"channelJoined"!==ue.type),(0,f.A)(Ee||Ae,ve,J,me),(0,P.A)({elementRef:de,chatId:e.chatId,isFocused:M,focusDirection:U,noFocusHighlight:R,isJustAdded:S}),(0,a._W)((()=>{e.isPinned&&q?.({viewportPinnedIdsToRemove:[e.id]})}));const{isContextMenuOpen:Se,contextMenuAnchor:xe,handleBeforeContextMenu:Fe,handleContextMenu:we,handleContextMenuClose:Te,handleContextMenuHide:Ge}=(0,g.A)(de,ke&&K,!h.cp,h.Ni,G),Be=void 0!==xe,Me=d<=0,[Ue,Ve]=(0,v.A)(Me);(0,a.vJ)((()=>{Me||setTimeout(Ve,d*s.zq7)}),[d,Ve,Me]);const{ref:Re}=(0,b.A)({isOpen:Ue,noOpenTransition:Me,noCloseTransition:!0,className:!1,ref:de});(0,a.vJ)((()=>{const t=de.current;t&&(0,u.Y)(t)&&(W&&ce({messageIds:[me]}),e.hasUnreadMention&&le({messageIds:[me]}))}),[W,me,ce,e.hasUnreadMention]),(0,a.vJ)((()=>{"giftPremium"===ue.type&&(w?.current&&me>=w.current||he)&&$({})}),[ue.type,me,he,w]);const Le=(0,N.A)(ge?j:void 0),Je=(0,I.A)((()=>{switch(ue.type){case"paymentSent":case"paymentRefunded":_({chatId:e.chatId,messageId:e.id});break;case"chatEditPhoto":Z({chatId:e.chatId,messageId:e.id,threadId:t,origin:o.TQ.ChannelAvatar});break;case"giftCode":Y({slug:ue.slug,message:{chatId:e.chatId,messageId:e.id}});break;case"prizeStars":ee({chatId:e.chatId,messageId:e.id});break;case"giftPremium":re({isGift:!0,fromUserId:n?.id,toUserId:n&&n.id===i?Ae:i,monthsAmount:ue.months});break;case"giftStars":ie({chatId:e.chatId,messageId:e.id});break;case"starGift":case"starGiftUnique":oe({chatId:e.chatId,messageId:e.id});break;case"channelJoined":se({chatId:Ae})}})),je=(0,a.Kr)((()=>{switch(ue.type){case"chatEditPhoto":if(!ue.photo)return;return a.Ay.createElement(T,{action:ue,observeIntersection:H,onClick:Je});case"suggestProfilePhoto":return a.Ay.createElement(te,{message:e,action:ue,observeIntersection:H});case"prizeStars":case"giftCode":return a.Ay.createElement(L,{action:ue,observeIntersectionForLoading:H,observeIntersectionForPlaying:Q,onClick:Je});case"giftPremium":case"giftStars":return a.Ay.createElement(V,{action:ue,observeIntersectionForLoading:H,observeIntersectionForPlaying:Q,onClick:Je});case"starGift":return a.Ay.createElement(D,{action:ue,message:e,observeIntersectionForLoading:H,observeIntersectionForPlaying:Q,onClick:Je});case"starGiftUnique":return a.Ay.createElement(X,{action:ue,message:e,observeIntersectionForLoading:H,observeIntersectionForPlaying:Q,onClick:Je});case"channelJoined":return a.Ay.createElement(Ie,{chatId:e.chatId});default:return}}),[ue,H,e,Q]);if(!(B&&"topicCreate"===ue.type||"phoneCall"===ue.type))return a.Ay.createElement("div",{ref:Re,id:(0,c.GZP)(me),className:(0,m.A)("ActionMessage",F.A.root,pe&&F.A.singleLine,ge&&F.A.fluidMultiline,je&&F.A.hasFullContent,M&&!R&&"focused",Be&&"has-menu-open",x&&"last-in-list"),"data-message-id":e.id,"data-is-pinned":e.isPinned||void 0,"data-has-unread-mention":e.hasUnreadMention||void 0,"data-has-unread-reaction":W||void 0,onMouseDown:e=>{(0,y.l)(e),Fe(e)},onContextMenu:we},!ye&&a.Ay.createElement(a.Ay.Fragment,null,ge&&a.Ay.createElement("div",{className:F.A.inlineWrapper},a.Ay.createElement("span",{className:F.A.fluidBackground,style:Le},a.Ay.createElement(k.A,{message:e,isInsideTopic:B}))),a.Ay.createElement("div",{className:F.A.inlineWrapper},a.Ay.createElement("span",{className:F.A.textContent,onClick:Je},a.Ay.createElement(k.A,{message:e,isInsideTopic:B})))),je,xe&&a.Ay.createElement(ne.A,{isOpen:Se,anchor:xe,message:e,messageListType:"thread",className:F.A.contextContainer,onClose:Te,onCloseAnimationEnd:Ge}),Ne&&a.Ay.createElement(ae.A,{isOutside:!0,message:e,threadId:t,observeIntersection:Q,isCurrentUserPremium:O}))})))},48196:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(84051),r=n(31481),i=n(28470);function o(e,t,n){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?a:a+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s=new Map;class c{constructor(e){this.color=e,o(this,"filterId",void 0),o(this,"referenceCount",0),this.filterId=`fluid-background-filter-${e.slice(1)}`,(0,i.z)(a.Ay.createElement("filter",{"color-interpolation-filters":"sRGB",xmlns:r.jNX},a.Ay.createElement("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"4",result:"blur"}),a.Ay.createElement("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 30 -15",result:"goo"}),a.Ay.createElement("feComposite",{in:"SourceAlpha",in2:"goo",operator:"over",result:"outline"}),a.Ay.createElement("feFlood",{"flood-color":e,result:"color"}),a.Ay.createElement("feComposite",{in:"color",in2:"outline",operator:"in"})),this.filterId)}getFilterId(){return this.referenceCount+=1,this.filterId}removeReference(){this.referenceCount-=1,0===this.referenceCount&&(0,i.e)(this.filterId)}isUsed(){return this.referenceCount>0}}function l(e,t){if((0,a.vJ)((()=>{if(e)return()=>{const t=s.get(e);t&&(t.removeReference(),t.isUsed()||s.delete(t.color))}}),[e]),!e)return;if(s.has(e))return d(s.get(e).getFilterId(),t);const n=new c(e);return s.set(e,n),d(n.getFilterId(),t)}function d(e,t){return t?`url(#${e})`:`filter: url(#${e});`}}}]);
//# sourceMappingURL=1816.1684bb37ade258e29c88.js.map